const navbar=document.getElementById("navbar"),hamburgerBtn=document.getElementById("hamburger-btn"),mobileMenu=document.getElementById("mobile-menu"),closeMenuBtn=document.getElementById("close-menu-btn"),mobileNavLinks=mobileMenu.querySelectorAll(".nav-link"),subscribeForm=document.getElementById("subscribe-form"),formMessageContainer=document.getElementById("form-message"),cursor=document.querySelector(".cursor"),cursorDot=document.querySelector(".cursor-dot"),themeToggleBtn=document.getElementById("theme-toggle"),mobileThemeToggleBtn=document.getElementById("mobile-theme-toggle");function initTheme(){const e=localStorage.getItem("theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches;"dark"===e||null===e&&t?(document.body.classList.add("dark-theme"),updateThemeIcon(!0)):(document.body.classList.remove("dark-theme"),updateThemeIcon(!1))}function updateThemeIcon(e){const t=e?"☀️":"🌙";themeToggleBtn.innerHTML=t,mobileThemeToggleBtn.innerHTML=t}function toggleTheme(){const e=document.body.classList.toggle("dark-theme");localStorage.setItem("theme",e?"dark":"light"),updateThemeIcon(e)}document.getElementById("current-year").textContent=(new Date).getFullYear(),themeToggleBtn.addEventListener("click",toggleTheme),mobileThemeToggleBtn.addEventListener("click",toggleTheme),initTheme(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(e=>{if(null===localStorage.getItem("theme")){const t=e.matches;document.body.classList.toggle("dark-theme",t),updateThemeIcon(t)}})),document.querySelectorAll('a[href^="#"]').forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault();const t=this.getAttribute("href"),r=window.matchMedia("(prefers-reduced-motion: reduce)").matches,n=document.querySelector(t);if(n){const e=navbar.offsetHeight,t=n.getBoundingClientRect().top+window.pageYOffset-e;window.scrollTo({top:t,behavior:r?"auto":"smooth"}),mobileMenu.classList.contains("active")&&(mobileMenu.classList.remove("active"),hamburgerBtn.setAttribute("aria-expanded","false"),mobileMenu.setAttribute("aria-hidden","true"))}}))})),window.addEventListener("scroll",(()=>{window.scrollY>50?navbar.classList.add("nav-scrolled"):navbar.classList.remove("nav-scrolled")})),hamburgerBtn.addEventListener("click",(()=>{mobileMenu.classList.add("active"),hamburgerBtn.setAttribute("aria-expanded","true"),mobileMenu.setAttribute("aria-hidden","false");const e=mobileMenu.querySelector(".nav-link");e&&e.focus()})),closeMenuBtn.addEventListener("click",(()=>{mobileMenu.classList.remove("active"),hamburgerBtn.setAttribute("aria-expanded","false"),mobileMenu.setAttribute("aria-hidden","true"),hamburgerBtn.focus()})),mobileNavLinks.forEach((e=>{e.addEventListener("click",(()=>{mobileMenu.classList.remove("active"),hamburgerBtn.setAttribute("aria-expanded","false"),mobileMenu.setAttribute("aria-hidden","true")}))})),document.addEventListener("click",(e=>{mobileMenu.contains(e.target)||hamburgerBtn.contains(e.target)||!mobileMenu.classList.contains("active")||(mobileMenu.classList.remove("active"),hamburgerBtn.setAttribute("aria-expanded","false"),mobileMenu.setAttribute("aria-hidden","true"))})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&mobileMenu.classList.contains("active")&&(mobileMenu.classList.remove("active"),hamburgerBtn.setAttribute("aria-expanded","false"),mobileMenu.setAttribute("aria-hidden","true"),hamburgerBtn.focus())}));const animateOnScroll=(e,t="fade-in",r=.1,n="0px 0px -100px 0px")=>{if(window.matchMedia("(prefers-reduced-motion: reduce)").matches)return void e.forEach((e=>{e.classList.add(t),e.style.opacity="1",e.style.transform="translateY(0)"}));const o=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(e.target.classList.add(t),o.unobserve(e.target))}))}),{threshold:r,rootMargin:n});e.forEach((e=>{e.style.opacity="0",e.style.transform="translateY(30px)",e.style.transition="opacity 0.6s ease-out, transform 0.6s ease-out",o.observe(e)}))},sectionsToAnimate=document.querySelectorAll("section > .container > *, section > *:not(.container)"),cardsToAnimate=document.querySelectorAll(".feature-card, .team-member, .client-card, .testimonial-card");function displayFormMessage(e,t="info"){formMessageContainer.innerHTML=`<div class="form-message ${t}">${e}</div>`,formMessageContainer.style.marginTop="1rem","loading"!==t&&setTimeout((()=>{formMessageContainer.firstChild&&formMessageContainer.firstChild.textContent.includes(e.substring(0,50))&&(formMessageContainer.innerHTML="",formMessageContainer.style.marginTop="0")}),6e3)}animateOnScroll(document.querySelectorAll(".section-title, .about-text, .team-intro, .app-preview > p, .device-mockup")),cardsToAnimate.forEach(((e,t)=>{window.matchMedia("(prefers-reduced-motion: reduce)").matches||(e.style.transitionDelay=.1*t+"s")})),animateOnScroll(cardsToAnimate),subscribeForm.addEventListener("submit",(function(e){e.preventDefault();const t=this.querySelector('input[type="email"]'),r=t.value.trim(),n=this.querySelector('button[type="submit"]');if(!r||!/^\S+@\S+\.\S+$/.test(r))return displayFormMessage("Please enter a valid email address.","error"),void t.focus();n.disabled=!0,n.textContent="Submitting...",displayFormMessage("Submitting your request...","loading"),setTimeout((()=>{Math.random()>.1?(displayFormMessage(`\n                <p>\n                    <span class="icon" aria-hidden="true">✓</span>\n                    Thank you! <strong>${r}</strong> is on the waitlist. We'll notify you at launch!\n                </p>`,"success"),this.reset()):displayFormMessage("Oops! Something went wrong. Please try again later.","error"),n.disabled=!1,n.textContent="Join Waitlist"}),1500)})),window.matchMedia("(min-width: 1024px)").matches&&!window.matchMedia("(prefers-reduced-motion: reduce)").matches&&(window.addEventListener("mousemove",(e=>{cursor&&(cursor.style.left=e.clientX+"px"),cursor&&(cursor.style.top=e.clientY+"px"),cursorDot&&(cursorDot.style.left=e.clientX+"px"),cursorDot&&(cursorDot.style.top=e.clientY+"px")})),document.querySelectorAll("a, button, .feature-card, .client-card, .team-member").forEach((e=>{e.addEventListener("mouseenter",(()=>{cursor&&(cursor.style.transform="translate(-50%, -50%) scale(1.5)"),cursor&&(cursor.style.background="var(--accent)"),cursor&&(cursor.style.opacity="0.3")})),e.addEventListener("mouseleave",(()=>{cursor&&(cursor.style.transform="translate(-50%, -50%) scale(1)"),cursor&&(cursor.style.background="transparent"),cursor&&(cursor.style.opacity="1")}))})));